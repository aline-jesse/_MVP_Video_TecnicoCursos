(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[219],{1817:function(e,r,t){Promise.resolve().then(t.bind(t,8228)),Promise.resolve().then(t.t.bind(t,2972,23))},8228:function(e,r,t){"use strict";t.d(r,{SlideEditor:function(){return w}});var n=t(7437),s=t(2265),a=t(8301);let i=(0,a.Z)("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),d=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),l=(0,a.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),o=(0,a.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var c=t(5956),u=t(2869),f=t(5186),m=t(8850),p=t(535),x=t(4508);let g=(0,p.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function v(e){let{className:r,variant:t,...s}=e;return(0,n.jsx)("div",{className:(0,x.cn)(g({variant:t}),r),...s})}var h=t(5613);t(3079);var b=(0,t(2119).$)("a5174010d6d2e0816c25034ba270126151fc9f24");let y=e=>{if(""===e.trim())return null;let r=Number(e);return Number.isNaN(r)||r<0?null:Math.round(r)},j=e=>{if(null==e)return"Sem conte\xfado estruturado.";if("string"==typeof e)return e.slice(0,200);try{let r=JSON.stringify(e);return r.length>200?"".concat(r.slice(0,200),"…"):r}catch(e){return"Conte\xfado n\xe3o p\xf4de ser exibido."}},N=e=>e.map(e=>{var r;return{id:e.id,title:e.title.trim(),duration:null!==(r=e.duration)&&void 0!==r?r:null,order_index:e.order_index}});function w(e){let{project:r,slides:t}=e,a=(0,s.useMemo)(()=>[...t].sort((e,r)=>e.order_index-r.order_index).map(e=>{var r;return{id:e.id,title:null!==(r=e.title)&&void 0!==r?r:"",duration:e.duration,order_index:e.order_index,contentSummary:j(e.content)}}),[t]),[p,x]=(0,s.useState)(a),[g,w]=(0,s.useState)({type:"idle",message:null}),[k,_]=(0,s.useTransition)(),C=(0,s.useRef)(JSON.stringify(N(a))),z=(0,s.useMemo)(()=>JSON.stringify(N(p))!==C.current,[p]),S=(e,r)=>{x(t=>{let n=[...t].sort((e,r)=>e.order_index-r.order_index),s=n.findIndex(r=>r.id===e);if(-1===s)return t;let a=s+r;if(a<0||a>=n.length)return t;let i=[...n],[d]=i.splice(s,1);return i.splice(a,0,d),i.map((e,r)=>({...e,order_index:r}))})},A=(e,r)=>{x(t=>t.map(t=>t.id===e?{...t,title:r}:t))},Z=(e,r)=>{x(t=>t.map(t=>t.id===e?{...t,duration:y(r)}:t))};return(0,n.jsxs)("section",{className:"space-y-6",children:[(0,n.jsxs)("header",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold tracking-tight",children:"Editor de slides"}),(0,n.jsx)(v,{children:r.status})]}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Ajuste t\xedtulos, dura\xe7\xe3o e ordem dos slides. Ap\xf3s salvar, o pipeline de renderiza\xe7\xe3o reutilizar\xe1 essas informa\xe7\xf5es para gerar o v\xeddeo final."})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg border bg-card p-4 text-sm",children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)("div",{className:"font-medium",children:"Projeto:"}),(0,n.jsx)("div",{children:r.name})]}),r.description?(0,n.jsx)("div",{className:"text-muted-foreground",children:r.description}):null,(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Slides carregados: ",p.length,". \xdaltima atualiza\xe7\xe3o: ",new Date(r.updated_at).toLocaleString("pt-BR")]})]}),"idle"!==g.type&&g.message?(0,n.jsxs)(h.bZ,{variant:"error"===g.type?"destructive":"default",children:[(0,n.jsxs)(h.Cd,{className:"flex items-center gap-2",children:["success"===g.type?(0,n.jsx)(i,{className:"h-4 w-4 text-green-500"}):(0,n.jsx)(d,{className:"h-4 w-4 text-destructive"}),"success"===g.type?"Altera\xe7\xf5es salvas":"N\xe3o foi poss\xedvel salvar"]}),(0,n.jsx)(h.X,{children:g.message})]}):null,(0,n.jsx)("div",{className:"space-y-4",children:p.map((e,r)=>{var t;return(0,n.jsxs)("article",{className:"space-y-4 rounded-lg border bg-background p-4 shadow-sm",children:[(0,n.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,n.jsx)("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full border text-base font-semibold",children:r+1}),(0,n.jsxs)("span",{children:["ID: ",e.id]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.z,{type:"button",variant:"outline",size:"icon",onClick:()=>S(e.id,-1),disabled:0===r||k,"aria-label":"Mover slide para cima",children:(0,n.jsx)(l,{className:"h-4 w-4"})}),(0,n.jsx)(u.z,{type:"button",variant:"outline",size:"icon",onClick:()=>S(e.id,1),disabled:r===p.length-1||k,"aria-label":"Mover slide para baixo",children:(0,n.jsx)(o,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-[2fr_1fr]",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(m._,{htmlFor:"title-".concat(e.id),children:"T\xedtulo do slide"}),(0,n.jsx)(f.I,{id:"title-".concat(e.id),value:e.title,onChange:r=>A(e.id,r.target.value),placeholder:"Slide ".concat(r+1),disabled:k})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)(m._,{htmlFor:"duration-".concat(e.id),children:"Dura\xe7\xe3o (segundos)"}),(0,n.jsx)(f.I,{id:"duration-".concat(e.id),type:"number",min:0,step:1,value:null!==(t=e.duration)&&void 0!==t?t:"",onChange:r=>Z(e.id,r.target.value),placeholder:"Ex: 8",disabled:k})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m._,{children:"Resumo do conte\xfado"}),(0,n.jsx)("p",{className:"mt-1 rounded-md border bg-muted/40 p-3 text-xs text-muted-foreground",children:e.contentSummary})]})]},e.id)})}),0===p.length?(0,n.jsxs)(h.bZ,{children:[(0,n.jsx)(h.Cd,{children:"Nenhum slide encontrado"}),(0,n.jsx)(h.X,{children:"Assim que o parser processar o PPTX, os slides aparecer\xe3o aqui para edi\xe7\xe3o."})]}):null,(0,n.jsxs)("footer",{className:"flex flex-wrap items-center gap-3",children:[(0,n.jsx)(u.z,{type:"button",onClick:()=>{w({type:"idle",message:null});let e=N(p);_(async()=>{let t=await b({projectId:r.id,slides:e.map(e=>{var r;return{...e,duration:null!==(r=e.duration)&&void 0!==r?r:null}})});t.ok?(C.current=JSON.stringify(e),w({type:"success",message:t.message})):w({type:"error",message:t.message})})},disabled:!z||k,children:k?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 animate-spin"}),"Salvando…"]}):"Salvar altera\xe7\xf5es"}),(0,n.jsx)(u.z,{type:"button",variant:"outline",onClick:()=>{x(a),w({type:"idle",message:null}),C.current=JSON.stringify(N(a))},disabled:!z||k,children:"Desfazer altera\xe7\xf5es"}),z||"success"===g.type?null:(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"Nenhuma altera\xe7\xe3o pendente."})]})]})}},5613:function(e,r,t){"use strict";t.d(r,{Cd:function(){return o},X:function(){return c},bZ:function(){return l}});var n=t(7437),s=t(2265),a=t(535),i=t(4508);let d=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,...a}=e;return(0,n.jsx)("div",{ref:r,role:"alert",className:(0,i.cn)(d({variant:s}),t),...a})});l.displayName="Alert";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...s})});o.displayName="AlertTitle";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...s})});c.displayName="AlertDescription"},2869:function(e,r,t){"use strict";t.d(r,{z:function(){return o}});var n=t(7437),s=t(2265),a=t(5293),i=t(535),d=t(4508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{var t;let{className:s,variant:i,size:o,asChild:c=!1,isLoading:u=!1,...f}=e,m=c?a.g7:"button",p=!!f.disabled||u,x=c?void 0:null!==(t=f.type)&&void 0!==t?t:"button",g=f.onClick;return(0,n.jsx)(m,{className:(0,d.cn)(l({variant:i,size:o,className:s})),"aria-disabled":c&&p||void 0,"aria-busy":u||void 0,"data-state":u?"loading":void 0,tabIndex:c&&p?-1:f.tabIndex,disabled:c?void 0:p,type:x,onClick:c?e=>{if(p){e.preventDefault(),e.stopPropagation();return}null==g||g(e)}:g,ref:r,...f})});o.displayName="Button"},5186:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var n=t(7437),s=t(2265),a=t(4508);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...i})});i.displayName="Input"},8850:function(e,r,t){"use strict";t.d(r,{_:function(){return u}});var n=t(7437),s=t(2265);t(4887);var a=t(5293),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let t=(0,a.Z8)(`Primitive.${r}`),i=s.forwardRef((e,s)=>{let{asChild:a,...i}=e,d=a?t:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(d,{...i,ref:s})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),d=s.forwardRef((e,r)=>(0,n.jsx)(i.label,{...e,ref:r,onMouseDown:r=>{var t;r.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));d.displayName="Label";var l=t(535),o=t(4508);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(d,{ref:r,className:(0,o.cn)(c(),t),...s})});u.displayName=d.displayName},4508:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(1994),s=t(3335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}},8301:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var i=(e,r)=>{let t=(0,n.forwardRef)((t,i)=>{let{color:d="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:c,children:u,...f}=t;return(0,n.createElement)("svg",{ref:i,...s,width:l,height:l,stroke:d,strokeWidth:c?24*Number(o)/Number(l):o,className:"lucide lucide-".concat(a(e)),...f},[...r.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...(Array.isArray(u)?u:[u])||[]])});return t.displayName="".concat(e),t}},5956:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(8301).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},function(e){e.O(0,[972,416,971,117,744],function(){return e(e.s=1817)}),_N_E=e.O()}]);